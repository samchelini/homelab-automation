---
- hosts: authelia
  gather_facts: false
  roles:
    - create_vm
    - extend-lvm
  vars:
    vm_name: authelia
    vcenter_resource_pool: infra
    vm_network: infra
    vm_cidr: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          61633566366464333138333331313963393762323834373038656466393237353162653230656534
          3666333364353566366230623730336535333731396439320a313163646535326562623765636366
          31633935326261666530363164323865323733326137353432663461373833313864643362643039
          3237623134356265610a353764666561366364393362353265663837303931313761383436356336
          3337
    vm_gateway: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          63313135313639636431323530343338613963396666633630383339613830653438613233303138
          6239343166643034383761316264393736303762393764610a306336633036366363306239663030
          37346534313534663861613265636237353263326535336230656466393531323635366564613439
          3164653362323332370a303238376266366535323465383431313065373466333437653038623536
          3936

- hosts: authelia
  roles:
    - authelia
  vars:
    common_name: '{{ "authelia." + authelia_domain }}'
    key_dir: /etc/authelia
    key_owner: authelia
    key_group: authelia
    authelia_domain: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          61636432666630366462353735666461343438323233646432303264383036313063316233326665
          6365313466626336663732303538323066363233393434330a326665643062333639323363353833
          62386561336666336464633738313635643632393663333734633534363866646432666338623539
          3937393036613562370a393631383938393437626430623965313062376331373162353266663662
          64656562363537623330643731346463653038343065363831303133633133653865
    admin_username: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          33663466356138653833666236616638393731633131336636653136353931353832383238383366
          3632383862656362626163346333306464396461653733340a653961393261613662353931303965
          66323764353631353731386566646135323530353938616163336266383365366236666165646137
          6437666361383465630a323437303031626138316161376339376535623431303533386231303831
          3436
    admin_password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          61373731333263633564323564626333343763386232313334356231363339333336613362376638
          6335303233623261633530653966373936376166333133610a353065333337613132636430643239
          37636361336534626236306139633136653835396138346437363833626462643934396431643838
          3763656532303766350a336234643865646464333561353131363736613233613938636430393637
          6661
    admin_password_salt: "{{ lookup('ansible.builtin.password', '/dev/null', length=22, chars=['ascii_letters'], seed=inventory_hostname) }}"
