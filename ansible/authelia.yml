---
- hosts: authelia
  gather_facts: false
  roles:
    - create_vm
    - extend-lvm
  vars:
    vm_name: authelia
    vcenter_resource_pool: infra
    vm_network: infra
    vm_cidr: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          63333731396530333033353536643830306633343664383465313262623762646666343831346138
          3530313730666532613561366264346439613831393133650a306136663436373065623133373565
          33653831343265353365336266336364373262666433643962303735303830373161616266376265
          3037323337356338640a643462633565313364313832313366336439326564656538633338343630
          3365
    vm_gateway: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          64613762393438383462646235376136323836383237613138336330646239333536323761623333
          6566383161383865626663623732653464323436653463610a616537306466323335653932356366
          30393936373066636337656636656338366431636564613665623336626432333765346633623165
          3131373664623534330a363239343766663632346562383136363761306239663337323865313061
          3165

- hosts: authelia
  roles:
    - authelia
  vars:
    common_name: '{{ "authelia." + authelia_domain }}'
    key_dir: /etc/authelia
    key_owner: authelia
    key_group: authelia
    authelia_domain: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          61636432666630366462353735666461343438323233646432303264383036313063316233326665
          6365313466626336663732303538323066363233393434330a326665643062333639323363353833
          62386561336666336464633738313635643632393663333734633534363866646432666338623539
          3937393036613562370a393631383938393437626430623965313062376331373162353266663662
          64656562363537623330643731346463653038343065363831303133633133653865
    admin_username: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          33663466356138653833666236616638393731633131336636653136353931353832383238383366
          3632383862656362626163346333306464396461653733340a653961393261613662353931303965
          66323764353631353731386566646135323530353938616163336266383365366236666165646137
          6437666361383465630a323437303031626138316161376339376535623431303533386231303831
          3436
    admin_password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          61373731333263633564323564626333343763386232313334356231363339333336613362376638
          6335303233623261633530653966373936376166333133610a353065333337613132636430643239
          37636361336534626236306139633136653835396138346437363833626462643934396431643838
          3763656532303766350a336234643865646464333561353131363736613233613938636430393637
          6661
    admin_password_salt: "{{ lookup('ansible.builtin.password', '/dev/null', length=22, chars=['ascii_letters'], seed=inventory_hostname) }}"
